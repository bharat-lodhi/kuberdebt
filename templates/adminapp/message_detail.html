{% extends "adminapp/dashboard.html" %}

{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="mb-0">
      <i class="fas fa-file-invoice text-primary me-2"></i>Loan Consultation Details
    </h2>
    <a href="{% url 'message_list' %}" class="btn btn-outline-secondary">
      <i class="fas fa-arrow-left me-2"></i>Back to List
    </a>
  </div>

  <div class="card shadow-sm border-0">
    <div class="card-header text-white py-3" style="background:#535da1;">
      <h5 class="mb-0">
        <i class="fas fa-user me-2"></i>{{ loan.full_name }}
      </h5>
    </div>
    <div class="card-body p-0">
      <div class="row">
        <div class="col-md-6">
          <div class="p-4 border-bottom border-end">
            <h6 class="text-muted text-uppercase small mb-3">Contact Information</h6>
            <table class="table table-sm table-borderless mb-0">
              <tr>
                <td class="text-muted" width="40%"><i class="fas fa-phone me-2"></i>Phone:</td>
                <td class="fw-bold">{{ loan.phone_number }}</td>
              </tr>
              <tr>
                <td class="text-muted"><i class="fas fa-envelope me-2"></i>Email:</td>
                <td class="fw-bold">{{ loan.email|default:"-" }}</td>
              </tr>
              <tr>
                <td class="text-muted"><i class="fas fa-city me-2"></i>City:</td>
                <td class="fw-bold">{{ loan.city|default:"-" }}</td>
              </tr>
            </table>
          </div>
        </div>
        
        <div class="col-md-6">
          <div class="p-4 border-bottom">
            <h6 class="text-muted text-uppercase small mb-3">Loan Details</h6>
            <table class="table table-sm table-borderless mb-0">
              <tr>
                <td class="text-muted" width="40%"><i class="fas fa-money-bill-wave me-2"></i>Loan Amount:</td>
                <td class="fw-bold">
                  {% if loan.total_loan_amount %}
                    â‚¹{{ loan.total_loan_amount }}
                  {% else %}
                    -
                  {% endif %}
                </td>
              </tr>
              <tr>
                <td class="text-muted"><i class="fas fa-credit-card me-2"></i>Loan Type:</td>
                <td class="fw-bold">{{ loan.get_loan_type_display|default:"-" }}</td>
              </tr>
              <tr>
                <td class="text-muted"><i class="fas fa-gavel me-2"></i>Legal Notice:</td>
                <td class="fw-bold">
                  <span class="badge {% if loan.legal_notice %}bg-warning{% else %}bg-success{% endif %}">
                    {{ loan.get_legal_notice_display }}
                  </span>
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>
      
      <div class="row">
        <div class="col-md-6">
          <div class="p-4 border-end">
            <h6 class="text-muted text-uppercase small mb-3">Consultation Timing</h6>
            <div class="d-flex align-items-center">
              <i class="fas fa-clock text-muted me-2"></i>
              <span class="fw-bold">{{ loan.preferred_timing|default:"Not specified" }}</span>
            </div>
          </div>
        </div>
        
        <div class="col-md-6">
          <div class="p-4">
            <h6 class="text-muted text-uppercase small mb-3">Submission Date</h6>
            <div class="d-flex align-items-center">
              <i class="fas fa-calendar text-muted me-2"></i>
              <span class="fw-bold">{{ loan.created_at|date:"d M Y, h:i A" }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Problem Description Section -->
  <div class="card shadow-sm border-0 mt-4">
    <div class="card-header bg-light py-3">
      <h5 class="mb-0">
        <i class="fas fa-sticky-note me-2"></i>Problem Description
      </h5>
    </div>
    <div class="card-body">
      {% if loan.problem_description %}
        <div class="bg-light p-3 rounded">
          {{ loan.problem_description|linebreaks }}
        </div>
      {% else %}
        <p class="text-muted fst-italic">No problem description provided.</p>
      {% endif %}
    </div>
  </div>


</div>

<style>
  .card {
    border-radius: 10px;
  }
  .card-header {
    border-radius: 10px 10px 0 0 !important;
  }
  .table-sm td {
    padding: 0.4rem 0.2rem;
  }
</style>
{% endblock content %}